@page "/diagnostic/monitor"
@using Microsoft.Extensions.Localization
@inherits BaseGrowComponent
@attribute [Authorize]
@inject IStringLocalizer<AppResources> Localizer

<div class="container">
    <div class="row">
        <div class="col">
            <h1>@Localizer["System monitor"]</h1>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><NavLink href="/">@Localizer["Home"]</NavLink></li>
                    <li class="breadcrumb-item active" aria-current="page">@Localizer["System monitor"]</li>
                </ol>
            </nav>
            <div class="card mt-4">
                <div class="card-body">
                    @if (IsLoading)
                    {
                        <div class="spinner-border mx-auto d-block" role="status">
                            <span class="sr-only">@Localizer["Loading"]...</span>
                        </div>
                    }
                    <div class="row">
                        <div class="col-12 col-lg-6 text-center ">
                            <h3>@Localizer["CPU usage by current process"]</h3>
                            <div class="d-flex flex-column justify-content-center align-content-center">
                                <SfCircularGauge @ref="CpuGauge"
                                                 Width="100%"
                                                 Height="450px">
                                    <CircularGaugeAxes>
                                        <CircularGaugeAxis Radius="60%" StartAngle="270" EndAngle="90">
                                            <CircularGaugeAxisLineStyle Width="5">
                                            </CircularGaugeAxisLineStyle>
                                            <CircularGaugePointers>
                                                <CircularGaugePointer Value="@CpuUsageByCurrentProcess">
                                                </CircularGaugePointer>
                                            </CircularGaugePointers>
                                        </CircularGaugeAxis>
                                    </CircularGaugeAxes>
                                </SfCircularGauge>
                                <div class="position-absolute" style="top: 15%;left: 50%;transform: translate(-50%, -50%);">
                                    <b>CPU:</b> @CpuUsageByCurrentProcess.ToString("N2")%
                                </div>
                            </div>

                        </div>
                        <div class="col-12 col-lg-6 text-center ">
                            <h3>@Localizer["RAM usage by current process"]</h3>
                            <div class="text-center">
                                <span><b>Total:</b> @Metrics?.Total Mb</span><br />
                                <span><b>Used:</b> @Metrics?.Used Mb</span><br />
                                <span><b>Free:</b> @Metrics?.Free Mb</span><br />
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <VersionDisplay />
</div>

